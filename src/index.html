<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<script src="/webui.js"></script>
		<title>Call JavaScript from Zig Example</title>

		<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" crossorigin="anonymous">
		<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>

		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

		<style>
			body {
				font-family: "Arial", sans-serif;
				color: white;
				background: linear-gradient(to right, #507d91, #1c596f, #022737);
				text-align: center;
				font-size: 18px;
			}
			button, input {
				padding: 10px;
				margin: 10px;
				border-radius: 3px;
				border: 1px solid #ccc;
				box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
				transition: 0.2s;
			}
			button {
				background: #3498db;
				color: #fff;
				cursor: pointer;
				font-size: 16px;
			}
			h1 {
				text-shadow: -7px 10px 7px rgba(67, 57, 57, 0.76);
			}
			button:hover {
				background: #c9913d;
			}
			input:focus {
				outline: none;
				border-color: #3498db;
			}
		</style>
	</head>

	<body>
		<div id="app">
			<h1>WebUI - Call JavaScript from Zig + Vue3</h1>
			<br />
			<h1>{{ count }}</h1>
			<br />
			<button @click="manualCount">Manual Count</button>
			<br />
			<button @click="autoCount">
				{{ intervalId == -1 ? 'Auto Count (Every 10ms)' : 'Stop Auto Count' }}
			</button>
			<br />
			<button @click="exitApp">Exit</button>
			<br /><br />

			<div class="dropup">
				<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				  Dropup
				  <span class="caret"></span>
				</button>
				<ul class="dropdown-menu">
				  <li><a href="#">Action</a></li>
				  <li><a href="#">Another action</a></li>
				  <li><a href="#">Something else here</a></li>
				  <li role="separator" class="divider"></li>
				  <li><a href="#">Separated link</a></li>
				</ul>
			</div>

			<button type="button" class="btn btn-default" aria-label="Left Align">
				<span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
			</button>

			<button type="button" class="btn btn-default btn-lg">
				<span class="glyphicon glyphicon-star" aria-hidden="true"></span> Star
			</button>

			<div class="jumbotron">
				<h1>Hello, world!</h1>
				<p>This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>
				<p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
			</div>
		</div>

		<script>
			const { createApp, ref } = Vue

			createApp({
				setup() {
					const count = ref(0)
					let intervalId = ref(-1)

					function manualCount() {
						count.value += 1
					}

					function autoCount() {
						if (intervalId.value == -1) {
							intervalId.value = setInterval(() => {
								count.value += 1
							}, 10)
						} else {
							clearInterval(intervalId.value)
							intervalId.value = -1
						}
					}

					function exitApp() {
						// 假设 Zig 后端有提供关闭窗口的 API
						webui.exit()
					}

					return {
						count,
						manualCount,
						autoCount,
						exitApp,
						intervalId,
					}
				}
			}).mount('#app')
		</script>
	</body>
</html>
